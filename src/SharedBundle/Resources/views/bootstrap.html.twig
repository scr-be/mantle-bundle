{% extends '::baseHTML5.html.twig' %}

{% block htmlHead %}

    <!-- character encoding and view-port -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- page title -->
    <title>{{ get_config_yml('scribe.html.title_pre') }}{% block titlePre %}Home{% endblock %}{{ get_config_yml('scribe.html.title_post') }}</title>

    <!-- general meta info -->
    <meta name="description" content="{% block description  %}{{ get_config('scribe.html.title_pre') }}{% endblock %}">
    <meta name="keywords"    content="{% block metaKeywords %}{{ get_config('scribe.meta.keywords')  }}{% endblock %}">
    <meta name="author"      content="{% block metaAuthor   %}{{ get_config('scribe.meta.author')    }}{% endblock %}">

    <!-- Google+ publisher data -->
    <link rel="publisher" href="{{ get_config('scribe.meta.gplus.profile') }}">

    <!-- Twitter card info -->
    {% block metaTwitter %}
        <meta name="twitter:card"        content="{% block metaTwitterCard    %}{{ get_config('scribe.meta.twitter.card')   }}{% endblock %}">
        <meta name="twitter:creator"     content="{% block metaTwitterCreator %}{{ get_config('scribe.meta.twitter.site')   }}{% endblock %}">
        <meta name="twitter:image"       content="{% block metaTwitterImage   %}{{ get_config('scribe.meta.twitter.image')  }}{% endblock %}">
        <meta name="twitter:title"       content="{{ block('titlePre')        }}{{ get_config_yml('scribe.html.title_post') }}">
        <meta name="twitter:description" content="{{ block('description')     }}">
        <meta name="twitter:site"        content="{{ get_config('scribe.meta.twitter.site') }}">
    {% endblock %}

    <!-- Open Graph data -->
    {% block metaOG %}
        <meta property="og:type"        content="{% block metaOGType  %}{{ get_config('scribe.meta.open_graph.type')  }}{% endblock %}">
        <meta property="og:image"       content="{% block metaOGImage %}{{ get_config('scribe.meta.open_graph.image') }}{% endblock %}">
        <meta property="og:title"       content="{{ block('titlePre') }}{{ get_config_yml('scribe.html.title_post')   }}">
        <meta property="og:locale"      content="{{ get_config('scribe.meta.open_graph.locale') }}">
        <meta property="og:site_name"   content="{{ get_config('scribe.meta.author')            }}">
        <meta property="og:description" content="{{ block('description')                        }}">
        <meta property="og:url"         content="{{ app.request.uri                             }}">
    {% endblock %}

    <!-- favicon -->
    <link rel="shortcut icon" href="bundles/scribeshared/images/favicon.ico">

    <!-- google fonts! -->
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Bitter:400,700,400italic|Source+Sans+Pro:300,400,700,300italic,400italic,700italic|Ubuntu+Mono|Roboto+Condensed:300italic,400italic,400,300,700">

    <!-- BLOCK: internal css stylesheets -->
    {% block stylesheetsInternal %}

        <!-- scribe core css -->
        {% stylesheets
            output='assets/css/scribe_core.css'
            filter='less,cssrewrite,?uglifycss'
                'bundles/scribeshared/less/scribe-v2.less'
        %}
            <link rel="stylesheet" href="{{ asset_url }}" />
        {% endstylesheets %}

        <!-- scribe plugin css -->
        {% stylesheets
            output='assets/css/scribe_plugins.css'
            filter='cssrewrite,?uglifycss'
                'bower/font-awesome/css/font-awesome.css'
                'bower/chosen/chosen.css'
                'bower/jqtimeline/css/jquery.jqtimeline.css'
                'bower/lightbox2/css/lightbox.css'
                'bower/icheck/skins/line/blue.css'
                'bower/x-editable/dist/bootstrap3-editable/css/bootstrap-editable.css'
                'bower/bootstrap3-datetimepicker/build/css/bootstrap-datetimepicker.min.css'
                'bower/bootstrap-daterangepicker/daterangepicker-bs3.css'
                'bower/qtip2/jquery.qtip.css'
                'bower/jquery-chronoline/dist/chronoline.css'
                'bower/messenger/build/css/messenger.css'
                'bower/messenger/build/css/messenger-theme-flat.css'
                'bower/messenger/build/css/messenger-spinner.css'
        %}
            <link rel="stylesheet" href="{{ asset_url }}" />
        {% endstylesheets %}

    {% endblock %}

{% endblock %}

{% block htmlBodyOuter %}
    <body>

        <div id="Top"></div>

        {% block loadingDialages %}
            <div class="loading-circle">
                <div class="loading-circle-container fade in">
                    <h3 class="loading-circle-text text-center">Please wait...</h3>
                    <div class="loading-circle-animation-outer"></div>
                    <div class="loading-circle-animation-inner"></div>
                </div>
                <div class="loading-circle-overlay fade in"></div>
            </div>
        {% endblock %}

        <!-- BLOCK: html body -->
        {% block htmlBody %}

            {% block navigation %}
                <div class="hidden-print">
                    {{ menu('main') }}
                </div>
            {% endblock %}

            {{ include('ScribeSharedBundle:Flash:all.html.twig') }}

            {% block contentWrapper %}
                <div id="scr-wrapper">
                    {% block content %}{% endblock %}
                    <div style="clear:both;"></div>
                </div>
            {% endblock %}

            {% block footer %}
                <div class="hidden-print">
                    {{ menu('foot') }}
                </div>
            {% endblock %}

        {% endblock %}

        {% block offcanvas %}
            <!-- BLOCK: all off-canvas items -->
        {% endblock %}

        {% block modals %}
            <!-- BLOCK: deletion modal, waiting in the wings -->
            <div id="modal-confirm-delete" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-confirm-delete" aria-hidden="true">
                 <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                            <h3 id="myModalLabel"><i class="fa fa-minus-circle"></i> Confirm Deletion <small><span class="modal-what">this item</span></small></h3>
                        </div>
                        <div class="modal-body">
                            <p>Please confirm the deletion of <span class="modal-what">this item</span>. <em>Note that this operation cannot be undone</em>. <strong>Are you sure?</strong></p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default btn-cancel" data-dismiss="modal" aria-hidden="true"><i class="fa fa-ban"></i> Cancel</button>
                            <a href="#" class="btn btn-danger btn-delete"><i class="fa fa-minus-circle"></i> <span class="modal-text">Continue</span></a>
                        </div>
                    </div>
                </div>
            </div>
            <div id="modal-confirm-ajax-delete" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-confirm-ajax-delete" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                            <h3 id="myModalLabel"><i class="fa fa-minus-circle"></i> Confirm Deletion <small><span class="modal-what">this item</span></small></h3>
                        </div>
                        <div class="modal-body">
                            <p>Please confirm the deletion of <span class="modal-what">this item</span>. <em>Note that this operation cannot be undone</em>. <strong>Are you sure?</strong></p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default btn-cancel" data-dismiss="modal" aria-hidden="true"><i class="fa fa-ban"></i> Cancel</button>
                            <a href="#" class="btn btn-danger btn-delete"><i class="fa fa-minus-circle"></i> <span class="modal-text">Continue</span></a>
                        </div>
                    </div>
                </div>
            </div>
            <div id="modal-login" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-login" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                            <h3 id="myModalLabel"><i class="fa fa-user"></i> Scribe Account</h3>
                        </div>

                        <form class="form-signin" action="/security/login_check" method="post">
                            <div class="modal-body">
                                <h4 style="margin-top:0px;">Please sign in:</h4>
                                <div class="form-group">
                                    <input id="form-signin-username" type="text" class="form-control" name="_username" placeholder="E-mail address" value="{{ get_last_username() }}">
                                </div>
                                <div class="form-group" style="margin-bottom:-15px">
                                    <input id="form-signin-password" type="password" class="form-control" name="_password" placeholder="Password" value="">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <small class="pull-right text-muted" style="margin-top: 16px;">
                                    <a href="/security/recover/">Forgot your password?</a>
                                </small>
                                <input type="hidden" name="_target_path" value="{{ app.request.uri }}">
                                <div class="btn-group pull-left">
                                    <button id="form-signin-go" class="btn btn-lg btn-primary" type="submit">Sign In <i class="fa fa-sign-in"></i></button>
                                    <button id="form-signin-cancel" class="btn btn-lg btn-warning"><i class="fa fa-ban"></i> Cancel</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            {% if scribe_security_tos_required() and scribe_security_tos_not_accepted() %}
                <div id="scribe-tos-modal" class="modal fade tos-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title">{{ scribe_security_tos_type('header') }} <small>{{ scribe_security_tos_type('headerSmall') }}</small></h3>
                            </div>
                            <div class="modal-body">
                                {{ scribe_security_tos_type('text')|swim }}
                            </div>
                            <div class="modal-footer">
                                <a id="scribe-tos-modal-decline" href="#" data-href="{{ path('security_tos_decline', {typeId: scribe_security_tos_type('id')}) }}" class="btn btn-link">{{ scribe_security_tos_type('btnDeclineText') }}</a>
                                <a id="scribe-tos-modal-accept" href="#" data-href="{{ path('security_tos_accept', {typeId: scribe_security_tos_type('id')}) }}" class="btn btn-primary">{{ scribe_security_tos_type('btnAcceptText') }}</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}

        {% endblock %}

        <a id="to-top" href="#Top"><i class="fa fa-angle-up"></i></a>

        <!-- BLOCK: all javascript resources -->
        {% block javascripts %}

            <!-- all shared javascript resources compiled with closure -->
            {% javascripts
                output='assets/js/scribe-plugins.js'
                filter='?closure'
                    '@modernizr_js'
                    '@jquery_js'
                    '@hotkeys_js'
                    '@smoothscroll_js'
                    '@jquery_textarea_autogrow_js'
                    '@jquery_browser_detection_js'
                    '@chosen_js'
                    '@stupidtable_js'
                    '@tagcloud_js'
                    '@highcharts_js'
                    '@bootstrap_js'
                    '@typeahead_js'
                    '@hogan_js'
                    '@lightbox2_js'
                    '@moment_js'
                    '@datetimepicker_js'
                    '@icheck_js'
                    '@xeditable_js'
                    '@daterangepicker_js'
                    '@raphael_js'
                    '@imagesloaded_js'
                    '@qtip_js'
                    '@messenger_js'
                    '@eldarion_ajax_js'
                    '@fuelux_js'
                    '@jquery_knob_js'
                    '@chronoline_js'
                    '@numeric_js'
                    '@jquery_cookie_js'
            %}
                <script src="{{ asset_url }}"></script>
            {% endjavascripts %}

            <!-- typeahead -->
            {% block javascripts_typeahead %}
                {{ search('scribe_search') }}
            {% endblock %}

            <!-- general shared scribe javascript functionality -->
            {% javascripts
                output='assets/js/scribe-core.js'
                filter='?closure'
                    'bundles/scribeshared/js/scribe/functions.js'
                    'bundles/scribeshared/js/scribe/general.js'
                    'bundles/scribeshared/js/scribe/ajax.js'
                    'bundles/scribeshared/js/scribe/tooltip.js'
                    'bundles/scribeshared/js/scribe/affix.js'
                    'bundles/scribeshared/js/scribe/form.js'
                    'bundles/scribeshared/js/scribe/tab.js'
                    'bundles/scribeshared/js/scribe/footer.js'
                    'bundles/scribeshared/js/scribe/messenger.js'
                    'bundles/scribeshared/js/scribe/modal.js'
                    'bundles/scribeshared/js/scribe/alert.js'
                    'bundles/scribeshared/js/scribe/actions.js'
                    'bundles/scribeshared/js/scribe/search.js'
                    'bundles/scribeshared/js/scribe/navbar.js'
                    'bundles/scribeshared/js/scribe/topanchor.js'
                    'bundles/scribeshared/js/scribe/scrollspy.js'
                    'bundles/scribeshared/js/scribe/login.js'
            %}
                <script src="{{ asset_url }}"></script>
            {% endjavascripts %}

            {% if scribe_security_tos_required() and scribe_security_tos_not_accepted() %}

                {% javascripts
                    combine=true
                    output='assets/js/scribe-core-tos.js'
                    filter='?closure'
                        'bundles/scribeshared/js/scribe/tos.js'
                %}
                    <script src="{{ asset_url }}"></script>
                {% endjavascripts %}

            {% endif %}

        {% endblock %}

    </body>
{% endblock %}
